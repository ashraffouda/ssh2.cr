sudo: required
services:
  - docker

before_install:
  - sudo apt-add-repository multiverse
  - sudo apt-get update
  - sudo apt-get install -o Dpkg::Options::="--force-confold" --force-yes -y docker-ce

install:
  - docker pull tutum/ubuntu:trusty
  - docker run -d -p 2222:22 -e AUTHORIZED_KEYS="`cat ./spec/keys/id_rsa.pub`" tutum/ubuntu:trusty
  - sudo apt-get install libssh2-1-dev
  - shards install
  - sleep 10

script:
  - crystal spec

language: crystal
